---
layout: default
title: Getting started
---

<h1>Getting started</h1>

<p>
  In this introduction, error handling, and some other details are glossed over.
</p>

<p>
  Connecting to the database looks like this.
</p>

{% highlight javascript %}
  var Connection = require('tedious').Connection;

  var config = {
    server: "192.168.1.210",
    options: {},
    authentication: {
      type: "default",
      options: {  
        userName: "test",
        password: "test",
      }
    }
  };

  var connection = new Connection(config);

  connection.on('connect', function(err) {
    if(err) {
      console.log('Error: ', err)
    }
    // If no error, then good to go...
    executeStatement();
  });
{% endhighlight %}

<p>
  The arguments to the
  <a href="api-connection.html">
    <code>Connection</code>
  </a>
  constructor are
  <em>host</em>, <em>username</em>, <em>password</em>,
  an <em>options object</em> (empty in this example),
  and a <em>callback function</em>.
</p>

<p>
  Tedious will use an encrypted connection by default from v6.0.0 onwards.
  If you have an earlier version, and require encryption or use Windows Azure,
  you must set <code>{encrypt: true}</code> within the <em>options object</em>. 
  Similarly, if you need an unencrypted connection, you must explicitly set
  <code>{encrypt: false}</code> within the <em>options object</em>.
</p>

<p>
  The connect event is emitted when either the connection has been established
  and authentication has succeeded, or an error occurred during connection or authentication.
</p>

<p>
  Once a connection has been established, a query can be executed.
</p>

{% highlight javascript %}
  var Request = require('tedious').Request;

  function executeStatement() {
    request = new Request("select 42, 'hello world'", function(err, rowCount) {
      if (err) {
        console.log(err);
      } else {
        console.log(rowCount + ' rows');
      }
    });

    request.on('row', function(columns) {
      columns.forEach(function(column) {
        console.log(column.value);
      });
    });

    connection.execSql(request);
  }
{% endhighlight %}

<p>
  A request is represented by a
  <a href="api-request.html">
    <code>Request</code>
  </a>
  instance.
  The arguments to <code>Request</code>'s constructor are
  the SQL statement, and a callback function.
  The callback is called if an error occurs.
</p>

<p>
  A <code>row</code> event is emitted for each row returned as a result of executing the statement.
  An array of columns is the sole parameter to the callback.
  For each column, a value and metadata is provided (although only the value is used in this example).
</p>

<p>
  When the request is complete, the callback is called.
</p>

<p>
  To execute the statement, the <code>Connection</code>'s
  <a href="api-connection.html#function_execSql"><code>execSql</code></a> must be called.
</p>

<p>
  An example based around these code fragments can be found in
  <a href="https://github.com/pekim/tedious/blob/master/examples/minimal.js">
    <code>examples/minimal.js</code>
  </a>.
</p>

<br/>

<h3>Azure Data Warehouse Connection</h3>
<p>
  Connecting to Azure Data Warehouse requires specifying additional
  <a href="api-connection.html#function_newConnection">
    <code>config</code> 
  </a> options:
</p>

{% highlight javascript %}
var ISOLATION_LEVEL = require('tedious').ISOLATION_LEVEL;
var Connection = require('tedious').Connection;

  var config = {
    userName: 'test',
    password: 'test',
    server: '192.168.1.210',
    
    // If you're on Azure Data Warehouse, you will need this:
    options: {
      encrypt: true,
      enableArithAbort: true,
      connectionIsolationLevel: ISOLATION_LEVEL.READ_UNCOMMITTED
    }
  };

  var connection = new Connection(config);
{% endhighlight %}
